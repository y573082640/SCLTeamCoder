{"title": "File Writing to UserFiles Folder", "name": "LGF_FileWrite", "description": "This function block offers writing data as binary / serialized data stream to a file which is then stored on the PLC's memory card in the folder UserFiles.", "type": "FUNCTION_BLOCK", "input": [{"name": "execute", "type": "Bool", "description": "Rising edge starts file write once"}, {"name": "fileName", "type": "String", "description": "Name of file including path: UserFiles/test.dat"}], "output": [{"name": "done", "type": "Bool", "description": "Commanded functionality has been completed successfully"}, {"name": "busy", "type": "Bool", "description": "FB is not finished and new output values can be expected"}, {"name": "error", "type": "Bool", "description": "An error occurred during the execution of the FB"}, {"name": "status", "type": "Word", "description": "Status of the FB, Error identification"}, {"name": "dataLength", "type": "DInt", "description": "Data length written to file (serialized length of data)"}], "in/out": [{"name": "bufferByteArray", "type": "Array[*] of Byte", "description": "Byte array buffer for read / write from / to file"}, {"name": "data", "type": "Variant", "description": "Data set to write into file"}], "return_value": [], "status_codes": {"16#0000": "STATUS_EXECUTION_FINISHED", "16#7000": "STATUS_NO_CALL", "16#7001": "STATUS_FIRST_CALL", "16#7002": "STATUS_SUBSEQUENT_CALL", "16#8201": "ERR_BUFFER_LOWERBOUND", "16#8202": "ERR_BUFFER_ARRAY_TO_SMALL_TO_COPY", "16#8401": "ERR_FILE_PATH", "16#8600": "ERR_UNDEFINED_STATE", "16#8601": "ERR_MOVE_BLK_VARIANT", "16#8603": "ERR_DATA_SERIALIZE", "16#8604": "ERR_FILE_WRITE_INIT", "16#8605": "ERR_FILE_WRITE"}, "user_defined_types": [{"name": "LGF_typeDiagnostics", "description": "Diagnostic structure to store and transfer diagnostic information from blocks trough the interface.", "member": [{"name": "status", "type": "Word", "default": "16#0000", "description": "Status of the Block or error identification when error occurred"}, {"name": "subfunctionStatus", "type": "Word", "default": "16#0000", "description": "Status or return value of called FB's, FC's and system blocks"}, {"name": "stateNumber", "type": "DInt", "default": "0", "description": "State in the state machine of the block where the error occurred"}]}], "description_zh": "\n该函数块实现将数据作为二进制/序列化数据流写入文件的功能，并将文件存储在PLC的内存卡中的UserFiles文件夹中。它提供了执行文件写入操作、检查写入进度、获取错误状态和写入数据长度等功能。\\n\\n当输入信号“execute”上升沿触发时，函数块开始执行文件写入操作。写入操作包括以下步骤：\\n1. 初始化：检查文件路径和缓冲区边界，初始化文件句柄。\\n2. 参数处理：将数据序列化到缓冲区数组中。\\n3. 文件处理：将缓冲区数组中的数据写入文件。\\n\\n函数块提供以下输出：\\n- done：指示命令功能是否已成功完成。\\n- busy：指示函数块是否正在执行写入操作。\\n- error：指示在执行函数块期间是否发生错误。\\n- status：指示函数块的状态或错误识别。\\n- dataLength：指示写入文件的数据长度（数据的序列化长度）。\\n- diagnostics：提供有关块状态或错误发生的详细信息。\\n\\n函数块使用状态机来管理写入操作的不同阶段。它还提供错误处理机制，以处理在执行写入操作期间可能发生的各种错误。\n\n\n"}