{
    "title": "File Writing to UserFiles Folder",
    "name": "LGF_FileWrite",
    "description": "## Short description ##\n\nThis function block offers writing data as binary / serialized data stream to a file which is then \nstored on the PLC's memory card in the folder UserFiles.\n\n## Functional description ##\n\nWith the function LGF_FileWrite the data budget of a variable can be written to data in a file. For \nwriting the data it is necessary to serialize it, which the function already takes from the user.\nFor serialization an external buffer in the form of a byte array must be connected which can take \nup the data quantity, if the buffer is too small an error is output.\nThe file name must always be specified in full together with the folder name and the file \nextension in the following format: UserFiles/test.dat.\nNote The file extension (here e.g. dat) can be freely selected or omitted, it is useful for external \nprocessing to indicate the format of the file to the user.\nA file extension in the file name has no influence on the content of the file as well as its \nformatting, to provide the data in an appropriate file format is up to the user.",
    "type": "FUNCTION_BLOCK",
    "input": [
        {
            "name": "execute",
            "type": "Bool",
            "description": "Rising edge starts file write once"
        },
        {
            "name": "fileName",
            "type": "String",
            "description": "Name of file including path: UserFiles/test.dat"
        }
    ],
    "output": [
        {
            "name": "done",
            "type": "Bool",
            "description": "Commanded functionality has been completed successfully"
        },
        {
            "name": "busy",
            "type": "Bool",
            "description": "FB is not finished and new output values can be expected"
        },
        {
            "name": "error",
            "type": "Bool",
            "description": "An error occurred during the execution of the FB"
        },
        {
            "name": "status",
            "type": "Word",
            "description": "Status of the FB, Error identification"
        },
        {
            "name": "dataLength",
            "type": "DInt",
            "description": "Data length written to file (serialized length of data)"
        }
    ],
    "in/out": [
        {
            "name": "bufferByteArray",
            "type": "Array[*] of Byte",
            "description": "Byte array buffer for read / write from / to file"
        },
        {
            "name": "data",
            "type": "Variant",
            "description": "Data set to write into file"
        }
    ],
    "return_value": [],
    "status_codes": {
        "16#0000": "STATUS_EXECUTION_FINISHED",
        "16#7000": "STATUS_NO_CALL",
        "16#7001": "STATUS_FIRST_CALL",
        "16#7002": "STATUS_SUBSEQUENT_CALL",
        "16#8201": "ERR_BUFFER_LOWERBOUND",
        "16#8202": "ERR_BUFFER_ARRAY_TO_SMALL_TO_COPY",
        "16#8401": "ERR_FILE_PATH",
        "16#8600": "ERR_UNDEFINED_STATE",
        "16#8601": "ERR_MOVE_BLK_VARIANT",
        "16#8603": "ERR_DATA_SERIALIZE",
        "16#8604": "ERR_FILE_WRITE_INIT",
        "16#8605": "ERR_FILE_WRITE"
    },
    "user_defined_types": [
        {
            "name": "LGF_typeDiagnostics",
            "description": "Diagnostic structure to store and transfer diagnostic information from blocks trough the interface.",
            "member": [
                {
                    "name": "status",
                    "type": "Word",
                    "default": "16#0000",
                    "description": "Status of the Block or error identification when error occurred"
                },
                {
                    "name": "subfunctionStatus",
                    "type": "Word",
                    "default": "16#0000",
                    "description": "Status or return value of called FB's, FC's and system blocks"
                },
                {
                    "name": "stateNumber",
                    "type": "DInt",
                    "default": "0",
                    "description": "State in the state machine of the block where the error occurred"
                }
            ]
        }
    ]
}