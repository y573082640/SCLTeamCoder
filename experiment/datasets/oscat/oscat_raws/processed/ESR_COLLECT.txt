Type Function module
Input ESR_0.. 7: ESR_DATA (ESR inputs)
RST: BOOL (asynchronous reset input)
Output ESR_OUT : ESR_DATA (Array with the ESR protocol)
IN/OUT POS: INT ( Position of of latest ESR protocol in the array)
ESR_COLLECT collects ESR data from up to 8 ESR modules and stores the
log in an array. The output POS indicates the position at which in the array
ESR_OUT is currently the last message is ESR. Collects the module more
than 64 messages so the messages are discarded and restarted at positi￾on 0. With the asynchronous reset input, the device can be reset at any
time. By resetting, all the collected data will be deleted and the pointer is
moved to -1. The module collects data in the output array ESR_OUT and
moves POS the last position of the array that contains data. When there
are no messages POS remains to -1. If the output data are read, the variable POS has to be set to -1, or if only readed a part POS can be set to the
last valid value.
The following example demonstrates how ESR_COLLECT is connected with
ESR modules.
The output ESR_OUT is made up as follows:
.
TYPE
.ADRESS .DS .TS .DATA [0..7]
1 Label Date TIME Status, 1 Byte ESR Error
2 Label Date TIME Status, 1 Byte ESR Status
3 Label Date TIME Status, 1 Byte ESR Debug
10 Label Date TIME not used Boolean input low transition
11 Label Date TIME not used Boolean input high transi￾tion
20 Label Date TIME Byte 0 - 3 Real Value Real Value change
The ESR data includes the following:
ESR_DATA.TYP Data type, see table above
ESR_DATA.ADRESS up to 10 characters long String Identifer 
ESR_DATA.DS Date stamp of type TIME DATA
ESR_DATA.TS Timestamp of type TIME (PLC Timer ) 
ESR_DATA.DATA up to 8 bytes of data block