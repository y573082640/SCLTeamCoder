Type Function module
Input SPE: BOOL (TRUE calculates the current sun position)
I / O XCAL: CALENDAR (external variables)
HOLIDAYS HOLIDAY_DATA (holiday list)
CALENDAR_CALC automatically calculates all the values in a CALENDAR
structure based on the value of the type UTC in the structure. XCAL is a
Pointer an external or global variable of type CALENDAR. CALENDAR_CALC
can thus deliver calendar values based on the structure XCAL throughout
the module. CALENDAR_CALC determines at each change of the value UTC
in XCAL automatically all other values in the structure. Alone the value of
UTC in a structure must be fed by the RTC module. The defnition of the
structured type CALENDAR you can fnd in section data structures. The
continuous calculation of the sun position can weigh heavily on a PLC wi￾thout FPU, which is why the current sun position is calculated only once
every 25 seconds if SPE = TRUE. This corresponds to an accuracy of 0.1
degrees which is quite sufcient for normal applications. If SPE is FALSE,
the position of the sun is not calculated. By an external array HOLIDAYS of
type HOLYDAY_DATA, the user can specify specifc holidays according to
his needs, for more information on the defnition of public holidays see the
module data structures. 
If several structures of the type CALENDAR are required (for example, or
various local and UTC times) then more modules CALENDAR_CALC can be
used with diferent structures of TYPE CALENDAR in accordance .
The following example shows how the module SYSRTCGETTIME reads the
RTC of the CPU and writes the current time in SYSTEMCAL.UTC. CALEN￾DAR_CALC checks every cycle if the value in .UTC has changed and if so it
calculates the other values of the structure automatically. The output
WDAY shows how the structure reads data for further processing. CALEN￾DAR_CALC accounts of the setup data from the data structure (OFFSET
DST_EN, LONGITUDE, LATITUDE).
In the external array HOLIDAYS up to 30 holidays can be defned. For ex￾amples, see the description of the data type HOLIDAY_DATA. This array of
HOLIDAY_DATA must be defned outside of the module and be pre-assi￾gned as a variable with the holiday dates.