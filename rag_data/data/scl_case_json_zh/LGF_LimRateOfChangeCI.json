{"title": "Rate of Change Limiter", "name": "LGF_LimRateOfChangeCI", "description": "Limits the rate of change of an input variable, turning a jump function into a ramp function.", "type": "FUNCTION_BLOCK", "input": [{"name": "value", "type": "LReal", "description": "Signal to be processed and limited in its rate of change"}, {"name": "setChangeRate", "type": "LReal", "description": "Rate of change of ramp function"}, {"name": "defaultOutValue", "type": "LReal", "description": "Value for pre-assignment of the output variable"}, {"name": "enDefaultOutValue", "type": "Bool", "description": "Assign default output value"}, {"name": "callOB", "type": "OB_CYCLIC", "description": "Calling wake-alarm interrupt OB"}], "output": [{"name": "delayedValue", "type": "LReal", "description": "Output variable"}, {"name": "error", "type": "Bool", "description": "Error occurred during the execution of the FB"}, {"name": "status", "type": "Word", "description": "Status of the FB"}, {"name": "subfunctionStatus", "type": "Word", "description": "Status or return value of called FB's, FC's and system blocks"}], "in/out": [], "return_value": [], "status_codes": {"16#0000": "STATUS_FINISHED_NO_ERROR", "16#8200": "ERR_NEG_RATE_LIM", "16#8600": "ERR_QRY_CINT", "16#8601": "ERR_OB_UNAVAILABLE"}, "user_defined_types": [], "description_zh": "\n该案例代码定义了一个名为 \"LGF_LimRateOfChangeCI\" 的函数块 (FB)，用于限制输入变量的变化速率，将一个阶跃信号转换为斜坡信号。函数块具有以下输入和输出参数：\n\n输入:\n- value (LReal): 要处理的信号，其变化速率需要被限制\n- setChangeRate (LReal): 斜坡函数的变化速率\n- defaultOutValue (LReal): 输出变量的预设值\n- enDefaultOutValue (Bool): 指示是否使用默认输出值\n- callOB (OB_CYCLIC): 调用唤醒中断的组织块 (OB)\n\n输出:\n- delayedValue (LReal): 输出变量，其值是经过变化速率限制后的输入信号\n- error (Bool): 执行 FB 时是否发生错误\n- status (Word): FB 的状态\n- subfunctionStatus (Word): 调用的 FB、FC 和系统块的状态或返回值\n\n函数块内部使用了一个临时变量 \"statPrevOut\" 来存储上一个周期的输出值。在计算变化速率时，会根据输入信号 \"value\" 和 \"setChangeRate\" 计算当前周期的输出值 \"tempOut\"。如果 \"enDefaultOutValue\" 为真，则输出默认值 \"defaultOutValue\"。\n\n状态代码:\n- 16#0000: STATUS_FINISHED_NO_ERROR - 函数块执行没有错误\n- 16#8200: ERR_NEG_RATE_LIM - 变化速率设置值不能为负数\n- 16#8600: ERR_QRY_CINT - 读取 OB 周期时间时发生错误\n- 16#8601: ERR_OB_UNAVAILABLE - OB 不可用\n\n函数块执行时，首先读取调用 OB 的周期时间，并检查是否可用。然后，检查变化速率设置值是否为负数。在计算阶段，根据输入信号和变化速率限制计算输出值。最后，将计算结果写入输出变量，并更新状态和错误信息。\n\n注意：该函数块不使用 ENO 机制来进行错误处理。错误处理是通过 \"error\" 和 \"status\" 输出参数来完成的。\n\n\n"}