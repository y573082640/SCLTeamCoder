{"title": "Advanced Rate of Change Limiter", "name": "LGF_LimRateOfChangeAdvancedCI", "description": "Limits the rate of change of an input variable with various operating modes.", "type": "FUNCTION_BLOCK", "input": [{"name": "autoValue", "type": "LReal", "description": "Signal to be processed and limited in its rate of change"}, {"name": "manualValue", "type": "LReal", "description": "Manually controlled output value"}, {"name": "posUpRateLim", "type": "LReal", "description": "Rate of change per second for the rising ramp in the positive value range"}, {"name": "posDownRateLim", "type": "LReal", "description": "Rate of change per second for the falling ramp in the positive value range"}, {"name": "negUpRateLim", "type": "LReal", "description": "Rate of change per second for the rising ramp in the negative value range"}, {"name": "negDownRateLim", "type": "LReal", "description": "Rate of change per second for the falling ramp in the negative value range"}, {"name": "highLim", "type": "LReal", "description": "High limit value"}, {"name": "lowLim", "type": "LReal", "description": "Low limit value"}, {"name": "defaultOutValue", "type": "LReal", "description": "Value for pre-assignment of the output variable"}, {"name": "enDefaultOutValue", "type": "Bool", "description": "Assign default output value"}, {"name": "track", "type": "Bool", "description": "Follow / tracking of Input variable"}, {"name": "manOp", "type": "Bool", "description": "Manual mode on"}, {"name": "reset", "type": "Bool", "description": "Complete restart of function"}, {"name": "callOB", "type": "OB_CYCLIC", "description": "Calling wake-alarm interrupt OB"}], "output": [{"name": "outputValue", "type": "LReal", "description": "Output variable"}, {"name": "posUpRateLim", "type": "Bool", "description": "Rise limitation in positive range tripped"}, {"name": "posDownRateLim", "type": "Bool", "description": "Down rate limit in positive range reached"}, {"name": "negUpRateLim", "type": "Bool", "description": "Up rate limit in negative range reached"}, {"name": "negDownRateLim", "type": "Bool", "description": "Down rate limit in negative range reached"}, {"name": "highLim", "type": "Bool", "description": "High limit reached"}, {"name": "lowLim", "type": "Bool", "description": "Low limit reached"}, {"name": "error", "type": "Bool", "description": "Error occurred during the execution of the FB"}, {"name": "status", "type": "Word", "description": "Status of the FB"}, {"name": "subfunctionStatus", "type": "Word", "description": "Status or return value of called FB's, FC's and system blocks"}], "in/out": [], "return_value": [], "status_codes": {"16#0000": "STATUS_FINISHED_NO_ERROR", "16#8200": "ERR_NEG_RATE_LIM", "16#8202": "ERR_NEG_RATE_OF_CHANGE", "16#8600": "ERR_QRY_CINT", "16#8601": "ERR_OB_UNAVAILABLE"}, "user_defined_types": [{"name": "LGF_typeNonLinSetpoints", "description": "Data type for setup a setpoint table for function", "member": [{"name": "inputValue", "type": "LReal", "default": "0.0", "description": "Input value to be interpolated"}, {"name": "outputValue", "type": "LReal", "default": "0.0", "description": "Corresponding interpolated value"}]}], "description_zh": "\n该SCL函数块FB名为LGF_LimRateOfChangeAdvancedCI，主要用于限制输入变量的变化率，并提供了多种操作模式。函数块接收多个输入参数，包括自动值（autoValue）、手动值（manualValue）、正上升速率限制（posUpRateLim）、正下降速率限制（posDownRateLim）、负上升速率限制（negUpRateLim）、负下降速率限制（negDownRateLim）、高限制值（highLim）、低限制值（lowLim）、默认输出值（defaultOutValue）、启用默认输出值（enDefaultOutValue）、跟踪输入变量（track）、手动模式（manOp）、重置（reset）和调用OB（callOB）。\n\n函数块的输出包括输出值（outputValue）、正上升速率限制触发（posUpRateLim）、正下降速率限制触发（posDownRateLim）、负上升速率限制触发（negUpRateLim）、负下降速率限制触发（negDownRateLim）、高限制触发（highLim）、低限制触发（lowLim）、错误（error）、状态（status）和子函数状态（subfunctionStatus）。\n\n函数块的主要逻辑如下：\n\n1. 初始化：获取采样时间，并根据输入参数进行错误检查，如QRY_CINT函数的错误、OB不可用、高低限制值错误和速率限制值错误等。\n\n2. 函数处理：根据操作模式（手动或自动）和跟踪状态，计算输出值。在自动模式下，根据输入值和速率限制值，计算输出值，并进行高低限制值的判断和修正。在手动模式下，输出值等于手动值。\n\n3. 输出赋值：将计算后的输出值、速率限制触发状态和高低限制触发状态赋值给对应的输出参数。\n\n4. 错误处理：如果过程中出现错误，将错误状态和子函数状态赋值给对应的输出参数。\n\n函数块使用了一些临时变量来存储中间计算结果和状态，如tempPosUp、tempPosDown、tempNegUp、tempNegDown、tempHighLim、tempLowLim、tempCycleReal、tempOutv、tempVar、tempCycleTime、tempCyclePhase、tempCycleStatus和tempReadTimeStatus等。\n\n函数块还定义了一些常量，如ZERO_INT、ZERO_REAL、SECOND_IN_MICROSECONDS、SUB_STATUS_NO_ERROR、STATUS_FINISHED_NO_ERROR、ERR_NEG_RATE_LIM、ERR_NEG_RATE_OF_CHANGE、ERR_QRY_CINT和ERR_OB_UNAVAILABLE等。\n\n函数块的执行流程如下：\n\n1. 初始化：获取采样时间，并根据输入参数进行错误检查。\n\n2. 根据操作模式（手动或自动）和跟踪状态，计算输出值。\n\n3. 将计算后的输出值、速率限制触发状态和高低限制触发状态赋值给对应的输出参数。\n\n4. 如果过程中出现错误，将错误状态和子函数状态赋值给对应的输出参数。\n\n5. 结束函数块的执行。\n\n\n"}