{"title": "DTL to Julian Date Converter", "name": "LGF_DTLToJulianDate", "description": "This function converts the date and time of data type DTL to the Julian date and as well the modified Julian Date to data type LReal (Double). The timestamp is calculated based on UTC.", "type": "FUNCTION", "input": [{"name": "timeDTL", "type": "DTL", "description": "Date and time as DTL to convert to Julian Date"}], "output": [{"name": "julianDate", "type": "LReal", "description": "Converted Julian date"}, {"name": "modifiedJulianDate", "type": "LReal", "description": "Converted modified Julian date"}, {"name": "error", "type": "Bool", "description": "An error occurred during the execution of the FB"}, {"name": "status", "type": "Word", "description": "Status of the FB, Error identification"}], "in/out": [], "return_value": [{"type": "Void", "description": "---"}], "status_codes": {"16#0000": "STATUS_EXECUTION_FINISHED_NO_ERROR", "16#8000": "ERR_DTL_INPUT_VALUE_INVALID", "16#8001": "ERR_TIME_BEFORE_1990"}, "user_defined_types": [], "description_zh": "\n该函数\"LGF_DTLToJulianDate\"将DTL格式的日期和时间转换为儒略日和修正儒略日，这两个日期都转换为LReal（双精度浮点数）类型。时间戳是基于UTC计算的，不考虑时区。该函数只允许转换1990年1月1日之后的日期。\n\n输入：\n- timeDTL (DTL): 需要转换为儒略日的日期和时间，使用DTL格式。\n\n输出：\n- julianDate (LReal): 转换后的儒略日。\n- modifiedJulianDate (LReal): 转换后的修正儒略日。\n- error (Bool): 执行过程中是否发生错误。\n- status (Word): 函数块的状态，用于错误识别。\n\n临时变量：\n- tempTimeDtl (DTL): 用于存储输入时间加上一个强制更新PLC的时间零点。\n- tempUnixTime (DInt): 用于存储从1970年1月1日至今的秒数。\n- tempJulianDate (LReal): 用于存储转换后的儒略日。\n- tempModifiedJulianDate (LReal): 用于存储转换后的修正儒略日。\n\n常量：\n- DELTA_1970_1990 (DInt): 从1970年1月1日到1990年1月1日的秒数差。\n- SEC_PER_DAY (DInt): 每天的秒数。\n- OFFSET_JULIAN_DATE_TO_UNIX (LReal): 儒略日与UNIX时间的偏移量。\n- OFFSET_MODIFIED_JULIAN_DATE_TO_JULIAN_DATE (LReal): 修正儒略日与儒略日的偏移量。\n- TIME_ZERO_FORCE_UPDATE (Time): 用于强制更新PLC的时间零点。\n- STATUS_EXECUTION_FINISHED_NO_ERROR (Word): 函数执行完成且没有错误的状态码。\n- ERR_DTL_INPUT_VALUE_INVALID (Word): DTL输入值无效错误的状态码。\n- ERR_TIME_BEFORE_1990 (Word): 时间早于1990年的错误状态码。\n- CONVERSION_LIMIT (DTL): 转换限制，即1990年1月1日的日期。\n\n函数执行流程：\n1. 初始化临时变量。\n2. 将输入时间加上一个强制更新PLC的时间零点，以触发PLC更新时间标签，并在DTL值出现错误时设置ENO。\n3. 检查DTL格式是否有效，如果无效，则设置错误标志和状态码，并返回。\n4. 检查时间是否早于1990年，如果是，则设置错误标志和状态码，并返回。\n5. 将系统时间（UTC）转换为UNIX时间。\n6. 将UNIX时间转换为儒略日。\n7. 将儒略日转换为修正儒略日。\n8. 将转换结果写入输出变量。\n9. 设置错误标志为假，状态码为执行完成且没有错误，函数结束。\n\n\n"}