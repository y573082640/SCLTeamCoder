{"title": "Profinet Interface Parameter Reader", "name": "LGF_ReadPnInterfaceParameter", "description": "Provides interface parameters such as IP Address, MAC Address, and PN Name.", "type": "FUNCTION_BLOCK", "input": [{"name": "execute", "type": "Bool", "description": "Rising edge starts action once"}, {"name": "hardwareId", "type": "HW_ANY", "description": "Hardware ID of the Interface where the parameter should be read"}], "output": [{"name": "done", "type": "Bool", "description": "Commanded functionality has been completed successfully"}, {"name": "busy", "type": "Bool", "description": "FB is not finished, new output values can be expected"}, {"name": "error", "type": "Bool", "description": "An error occurred during the execution of the FB"}, {"name": "status", "type": "DWord", "description": "Status of the FB and error identification"}, {"name": "address", "type": "IP_V4", "description": "IP Address from interface"}, {"name": "subnetMask", "type": "IP_V4", "description": "Subnet mask from interface"}, {"name": "standardGateway", "type": "IP_V4", "description": "Standard gateway address from interface"}, {"name": "macAddress", "type": "Array[0..5] of Byte", "description": "MAC Address from interface"}, {"name": "pnName", "type": "String", "description": "Profinet name from interface"}], "in/out": [], "return_value": [], "status_codes": {"16#0000": "STATUS_EXECUTION_FINISHED: Execution finished without errors", "16#7000": "STATUS_NO_CALL: No job being currently processed", "16#7001": "STATUS_FIRST_CALL: First call after incoming new job", "16#7002": "STATUS_SUBSEQUENT_CALL: Subsequent call during active processing", "16#9000": "ERR_UNDEFINED_STATE: Due to an undefined state in state machine"}, "user_defined_types": [], "description_zh": "\n\n该函数块FB用于读取Profinet接口的参数，包括IP地址、子网掩码、默认网关、MAC地址和PN名称。当输入信号“execute”产生上升沿时，FB开始执行读取操作。FB使用状态机来管理读取过程，包括读取记录和处理记录两个状态。\n\n在触发状态下，FB首先检查是否被触发。如果是第一次触发，FB将初始化相关变量，并设置状态为读取记录。然后，FB使用RDREC子函数读取接口参数的记录。如果读取成功，FB将状态设置为处理记录，并开始处理数据。\n\n在处理记录状态下，FB从读取到的记录中提取PN名称、MAC地址、IP地址、子网掩码和默认网关，并将它们存储在相应的输出变量中。然后，FB重置读取记录，并将状态设置为无处理。\n\n在输出区域，FB根据状态机的状态更新输出变量。如果执行完成且没有错误，FB将“done”输出设置为真，表示操作成功完成。如果有错误发生，FB将“error”输出设置为真，并更新“status”输出以指示错误代码。最后，FB根据ENO机制更新ENO输出。\n\n状态代码：\n- 16#0000：STATUS_EXECUTION_FINISHED：执行完成，没有错误\n- 16#7000：STATUS_NO_CALL：没有正在处理的任务\n- 16#7001：STATUS_FIRST_CALL：新任务开始后的第一次调用\n- 16#7002：STATUS_SUBSEQUENT_CALL：处理期间的后继调用\n- 16#9000：ERR_UNDEFINED_STATE：状态机中出现未定义状态\n\n\n"}