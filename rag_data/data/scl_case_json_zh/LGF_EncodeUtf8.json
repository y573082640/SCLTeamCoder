{"title": "WString to UTF-8 Byte Stream Encoder", "name": "LGF_EncodeUtf8", "description": "Encodes a WString into an UTF-8 encoded byte stream.", "type": "FUNCTION", "input": [{"name": "sourceString", "type": "WString", "description": "Character that shall be converted to UTF-8"}, {"name": "startPos", "type": "DInt", "description": "Position in encoded byte stream to start insert encoded WChars (Array lower bound is added)"}], "output": [{"name": "bytesUsed", "type": "UInt", "description": "Number of Bytes converted. Ranges from 1 to 3."}], "in/out": [{"name": "encodedByteStream", "type": "Array[*] of Byte", "description": "UTF-8 conformant byte sequence."}], "return_value": [{"type": "Word", "description": "Status of the FC, Erroridentification"}], "status_codes": {"16#0000": "STATUS_NO_ERROR", "16#8201": "ERR_START_POS_OUTSIDE", "16#8202": "ERR_COUNT_EXCEEDS_BOUNDS"}, "user_defined_types": [], "description_zh": "下面是对给定任务的中文自然语言描述：\n\n这个函数\"LGF_EncodeUtf8\"将宽字符串(WString)编码为UTF-8编码的字节流。函数接受两个输入参数：sourceString，即要转换的宽字符串；startPos，即编码字节流的起始插入位置。函数的输出参数是bytesUsed，表示转换过程中使用的字节数。函数的返回值是一个Word类型的变量，表示函数的状态，用于错误识别。\n\n函数的主要逻辑是遍历输入的宽字符串sourceString中的每一个字符，并将每个字符转换为UTF-8编码。转换后的字节序列存储在encodedByteStream数组中。在转换过程中，函数会检查startPos是否在数组的有效范围内，以及是否有足够的数组空间来存储转换后的字节序列。\n\n函数会根据字符的Unicode编码值来决定使用1、2或3个字节来存储UTF-8编码。如果字符的Unicode编码值小于等于0x007F，则使用1个字节；如果小于等于0x07FF，则使用2个字节；如果小于等于0xFFFF，则使用3个字节。\n\n如果startPos超出了数组的范围，或者转换后的字节序列超出了数组的范围，函数会返回错误状态ERR_START_POS_OUTSIDE或ERR_COUNT_EXCEEDS_BOUNDS。\n\n函数的最终输出是encodedByteStream数组，其中包含了转换后的UTF-8编码的字节序列，以及bytesUsed，表示转换过程中使用的字节数。如果转换过程中出现了错误，函数会设置ENO为FALSE，表示执行过程中出现了错误。"}