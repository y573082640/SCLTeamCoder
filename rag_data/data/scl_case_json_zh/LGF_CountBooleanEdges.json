{"title": "Boolean signal edge detection", "name": "LGF_CountBooleanEdges", "description": "This function evaluates an input signal for different states in a certain amount of time.", "type": "FUNCTION_BLOCK", "input": [{"name": "trigger", "type": "Bool", "description": "Trigger to evaluate signal"}, {"name": "monitorTime", "type": "Time", "description": "Time to monitor and count edges on `trigger` input"}], "output": [{"name": "single", "type": "Bool", "description": "Single edge until monitoring time expires"}, {"name": "double", "type": "Bool", "description": "Two edges in between the monitoring time"}, {"name": "long", "type": "Bool", "description": "Just a single edge in the monitoring time, the `trigger` input stays TRUE after the edge appears"}, {"name": "severalEdges", "type": "Bool", "description": "Numerous Edges occur within the monitoring time"}, {"name": "noOfEdges", "type": "USInt", "description": "Number of edges in between the monitoring time frame"}], "in/out": [], "return_value": [], "status_codes": {}, "user_defined_types": [], "description_zh": "下面是对应实现该任务的Siemens SCL案例代码的中文自然语言描述：\n\n该函数块`LGF_CountBooleanEdges`用于检测输入信号`trigger`在不同时间状态下的变化。具体来说，它监测一个布尔型输入信号，并在一定的时间段`monitorTime`内计算该信号的边缘变化次数和状态。\n\n输入信号包括：\n- `trigger`：待评估的布尔型信号。\n- `monitorTime`：监测和计算`trigger`信号边缘的时间段，默认为1秒。\n\n输出信号包括：\n- `single`：如果在监测时间段内只检测到一个边缘，则为真。\n- `double`：如果在监测时间段内检测到两个边缘，则为真。\n- `long`：如果在监测时间段内只检测到一个边缘，并且`trigger`信号在边缘出现后保持为真，则为真。\n- `severalEdges`：如果在监测时间段内检测到多个边缘，则为真。\n- `noOfEdges`：在监测时间段内检测到的边缘数量。\n\n程序逻辑如下：\n1. 初始化：将临时变量`tempTriggerEdge`设置为`trigger`信号的当前值与上一个周期值的逻辑与，以检测边缘。同时，将`statTriggerPrevious`更新为当前`trigger`信号的值。\n2. 边缘检测：如果检测到边缘（`tempTriggerEdge`为真），则启动一个定时器`instTimer`，并将边缘计数器`statTriggerCounter`增加1。\n3. 时间监测：如果定时器`instTimer`溢出（即监测时间已过），则根据边缘计数器的值设置输出信号：\n   - 如果`trigger`为真且边缘计数器为1，则`long`输出为真。\n   - 如果边缘计数器为1，则`single`输出为真。\n   - 如果边缘计数器为2，则`double`输出为真。\n   - 如果边缘计数器大于2，则`severalEdges`输出为真。\n同时，将`noOfEdges`输出设置为边缘计数器的值。\n4. 输出：将临时变量中的值写入对应的输出信号，并将ENO设置为真，表示没有错误发生。\n\n该函数块不使用ENO进行错误处理，而是通过输出信号`single`、`double`、`long`、`severalEdges`和`noOfEdges`来反映输入信号`trigger`的状态变化。"}