{"title": "Random UDInt Range Number Generator", "name": "LGF_RandomRange_UDInt", "description": "This function generates a random value in defined limits with each call. The random number has the data type UDInt in the specified range.", "type": "FUNCTION", "input": [{"name": "minValue", "type": "UDInt", "description": "Minimum value of the range of the random number - lower border"}, {"name": "maxValue", "type": "UDInt", "description": "Maximum value of the range of the random number - upper border"}], "output": [{"name": "error", "type": "Bool", "description": "Error flag"}, {"name": "status", "type": "Word", "description": "Status code"}, {"name": "subfunctionStatus", "type": "Word", "description": "Status or return value of called blocks"}], "in/out": [], "return_value": [{"type": "UDInt", "description": "Random UDInt number in the predefined range"}], "status_codes": {"16#0000": "STATUS_FINISHED_NO_ERROR", "16#8200": "ERR_MAX_LESS_MIN", "16#8600": "ERR_RD_SYS_T"}, "user_defined_types": [], "description_zh": "\n函数 \"LGF_RandomRange_UDInt\" : UDInt\n{ S7_Optimized_Access := 'TRUE' }\nAUTHOR : Siemens_Digital_Industries\nFAMILY : LGF\nNAME : LGF_RandomRange_UDInt\n   VAR_INPUT \n      minValue : UDInt;\n      maxValue : UDInt;\n   END_VAR\n\n   VAR_OUTPUT \n      error : Bool;\n      status : Word;\n      subfunctionStatus : Word;\n   END_VAR\n\n   VAR_TEMP \n      tempTime  : DTL;\n      tempNanoSecondInDWord : DWord;\n      tempTimeStatus : Word;\n      tempRandomValue : DWord;\n      tempNormReal : Real;\n   END_VAR\n\n   VAR CONSTANT \n      ZERO : UDInt := 0;\n      MAX_UDINT : UDInt := 4294967295 ;\n      SUB_STATUS_NO_ERROR : Word := 16#0000;\n      STATUS_FINISHED_NO_ERROR : Word := 16#0000;\n      ERR_MAX_LESS_MIN : Word := 16#8200;\n      ERR_RD_SYS_T : Word := 16#8600;\n   END_VAR\n\n\nBEGIN\n\t// 块信息头\n\t// ...\n\t\n\t// 描述\n\t// ...\n\t\n\t// 验证输入\n\t// 检查最大值是否小于最小值\n\tIF (#minValue > #maxValue) THEN\n\t    #error := true;\n\t    #status := #ERR_MAX_LESS_MIN;\n\t    #subfunctionStatus := #SUB_STATUS_NO_ERROR;\n\t    #LGF_RandomRange_UDInt := #ZERO;\n\t    RETURN;\n\tEND_IF;\n\t\n\t// 读取系统时间\n\t#tempTimeStatus := INT_TO_WORD(RD_SYS_T(#tempTime));\n\t\n\t// 检查返回变量是否有错误\n\tIF (#tempTimeStatus <> #SUB_STATUS_NO_ERROR) THEN\n\t    #error := true;\n\t    #status := #ERR_RD_SYS_T;\n\t    #subfunctionStatus := #tempTimeStatus;\n\t    #LGF_RandomRange_UDInt := #ZERO;\n\t    RETURN;\n\tEND_IF;\n\t\n\t// 计算随机数\n\t// ...\n\t\n\t// 将结果赋值给输出\n\t#error := false;\n\t#status := #STATUS_FINISHED_NO_ERROR;\n\t#subfunctionStatus := #SUB_STATUS_NO_ERROR;\n\t// 不使用ENO机制\n\tENO := TRUE;\nEND_FUNCTION\n\n\n"}