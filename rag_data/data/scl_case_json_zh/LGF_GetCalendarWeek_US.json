{"title": "US calendar week calculation", "name": "LGF_GetCalendarWeek_US", "description": "This function uses the specified date to calculate the calendar week and the number of days that have passed since the beginning of the year for the USA and many other countries.", "type": "FUNCTION", "input": [{"name": "date", "type": "DTL", "description": "Date used to calculate the calendar week and days since 1 January"}], "output": [{"name": "calendarDay", "type": "DInt", "description": "Days past since January 1st on given date"}, {"name": "error", "type": "Bool", "description": "FALSE: No error / TRUE: An error occurred during the execution of the FB"}, {"name": "status", "type": "Word", "description": "16#0000-16#7FFF: Status of the FB / 16#8000-16#FFFF: Error identification"}], "in/out": [], "return_value": [{"type": "DInt", "description": "Number of the calendar week."}], "status_codes": {"16#0000": "STATUS_NO_ERROR", "16#8201": "ERR_LIM_DATE Date out of the range"}, "user_defined_types": [], "description_zh": "该函数\"LGF_GetCalendarWeek_US\"根据输入的日期计算美国和其他许多国家的日历周数以及该日期距离年初的天数。它首先检查输入日期是否在有效范围内，然后根据日期计算日历周数。计算日历周数时，它考虑了年份是否为闰年以及1月1日是星期几。如果年份有53周，它还会对周数进行适当的调整。函数最后返回日历周数和自年初以来的天数。\n\n函数的主要逻辑如下：\n\n1. 检查输入日期是否在有效范围内。\n2. 计算输入日期距离年初的天数。\n3. 检查当前年份是否为闰年。\n4. 计算当前年份和下一年1月1日的星期几。\n5. 计算当前年份12月31日和上一年1月1日的星期几。\n6. 根据这些信息，计算日历周数，并进行适当的调整。\n7. 返回日历周数和自年初以来的天数。\n\n涉及的关键输入输出变量及其控制逻辑如下：\n\n- 输入变量：\n    - date：用于计算日历周数和自年初以来的天数的日期。\n- 输出变量：\n    - calendarDay：自年初以来的天数。\n    - error：如果函数执行过程中出现错误，则为TRUE，否则为FALSE。\n    - status：函数的状态或错误识别码。\n- 返回值：\n    - item：日历周数。"}