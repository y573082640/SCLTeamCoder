{"title": "Histogram Calculation Function Block for Real Data", "name": "LGF_Histogram_LReal", "description": "The histogram shows the frequency distribution of a sample by class with real values.", "type": "FUNCTION_BLOCK", "input": [{"name": "execute", "type": "Bool", "description": "Activation of the calculation with each positive edge."}, {"name": "numberOfClasses", "type": "UInt", "description": "Number of desired classes."}], "output": [{"name": "error", "type": "Bool", "description": "FALSE: No error, TRUE: An error occurred during the execution of the FB"}, {"name": "status", "type": "Word", "description": "Status of the FB and error identification."}, {"name": "subfunctionStatus", "type": "Word", "description": "Status or return value of called FB's, FC's and system blocks"}, {"name": "histValues", "type": "Array[0..1, 0..#CLASSES_COUNTER_UP_LIMIT] of LReal", "description": "Displays the relative frequency and class centers."}, {"name": "axis", "type": "Array[0..3] of LReal", "description": "Specifies the axis values."}, {"name": "classWidth", "type": "LReal", "description": "Returns the calculated class width."}], "in/out": [{"name": "values", "type": "Array[*] of LReal", "description": "The array containing the data series for calculation."}], "return_value": [], "status_codes": {"16#0000": "STATUS_EXECUTION_FINISHED: Execution finished without errors", "16#7000": "STATUS_NO_CALL: No call of FB. The block waits for activation.", "16#7001": "STATUS_FIRST_CALL: First call of FB after enabling", "16#8600": "ERR_SHELL_SORT: Error in command `LGF_ShellSort_LReal`.", "16#9101": "ERR_WRONG_NO_CLASSES: Incorrect number of classes."}, "user_defined_types": [], "description_zh": "\n该函数块旨在计算包含实数型数据的数组的直方图。直方图通过将数据分为若干个类别来展示样本的频率分布。该函数块接收一个布尔型输入信号`execute`，该信号在每个上升沿激活直方图的计算。另一个输入`numberOfClasses`定义了期望的类别数量。函数块的输出包括一个布尔型错误指示`error`、一个字型状态指示`status`、一个字型子函数状态指示`subfunctionStatus`、一个二维实数型数组`histValues`用于显示每个类别的相对频率和类别中心、一个实数型数组`axis`用于指定坐标轴的值、以及一个实数型`classWidth`用于返回计算出的类别宽度。函数块还接收一个实数型数组`values`作为输入/输出参数，该数组包含了待计算的数据序列。\n\n函数块的执行流程如下：\n1. 首先检测`execute`信号的上升沿，如果检测到上升沿，则开始直方图计算。\n2. 计算输入数组`values`的边界，并重置和初始化相关变量。\n3. 检查输入的类别数量`numberOfClasses`是否在允许的范围内。\n4. 对输入数组`values`进行排序，并找出数组的最大值和最小值。\n5. 计算每个类别的宽度`statWidth`，并根据类别数量计算每个类别的边界`statBound`。\n6. 遍历排序后的数组，统计每个类别中的值数量，并计算每个类别的相对频率`statHistFrequencyRel`和类别中心`statHistMiddleOfClass`。\n7. 将计算出的相对频率和类别中心复制到输出数组`histValues`中。\n8. 将坐标轴的值、类别宽度以及状态信息赋值给相应的输出参数。\n\n函数块的状态代码定义了执行完成、未调用、首次调用、排序错误和类别数量错误等状态。在执行过程中，如果遇到错误，函数块会将错误信息记录在`error`、`status`和`subfunctionStatus`输出参数中。\n\n该函数块通过SCL语言实现了一个高效的直方图计算功能，可以方便地用于数据分析和可视化。\n\n\n"}