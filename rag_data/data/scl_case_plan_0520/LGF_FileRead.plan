{"variables": ["1. name: execute, type: Bool, initial: None, role: Input to start the file read process.", "2. name: dataLengthMustMatch, type: Bool, initial: None, role: Input to specify if the data length must match.", "3. name: fileName, type: String, initial: None, role: Input for the file name including the path.", "4. name: done, type: Bool, initial: False, role: Output indicating the command is completed.", "5. name: busy, type: Bool, initial: False, role: Output indicating the FB is processing.", "6. name: error, type: Bool, initial: False, role: Output indicating an error occurred.", "7. name: status, type: Word, initial: STATUS_NO_CALL, role: Output for the FB status.", "8. name: dataLength, type: DInt, initial: 0, role: Output for the length of the data read.", "9. name: diagnostics, type: LGF_typeDiagnostics, initial: emptyDiagnostics, role: Output for diagnostic information.", "10. name: bufferByteArray, type: Array[*] of Byte, initial: None, role: I/O buffer for file operations.", "11. name: data, type: Variant, initial: None, role: I/O for the data read from the file.", "12. name: statInternal, type: Struct, initial: executePrevious=False, done=False, busy=False, error=False, diagnostics=emptyDiagnostics, role: Internal state storage.", "13. name: instFileRead, type: FileReadC, initial: None, role: File read instruction instance.", "14. name: statMainState, type: DInt, initial: FB_STATE_NO_PROCESSING, role: Main state of the FB.", "15. name: statParameterDataIsByteArray, type: Bool, initial: False, role: Indicates if the data parameter is a byte array.", "16. name: statAsynchronusMode, type: Bool, initial: False, role: Indicates if the FB is running in asynchronous mode.", "17. name: statBufferSize, type: DInt, initial: 0, role: Size of the buffer.", "18. name: statLengthData, type: DInt, initial: 0, role: Length of the data.", "19. name: statLengthFile, type: DInt, initial: 0, role: Length of the file.", "20. name: tempExecute, type: Bool, initial: None, role: Temporary storage for execute input.", "21. name: tempExitStateLoop, type: Bool, initial: True, role: Controls the exit of the state loop.", "22. name: tempResult, type: Word, initial: None, role: Temporary storage for results.", "23. name: tempBufferPosition, type: DInt, initial: 0, role: Temporary storage for buffer position.", "24. name: tempPathPrefix, type: String, initial: None, role: Temporary storage for path prefix.", "25. name: PATH_PREFIX, type: String, initial: 'UserFiles/', role: Constant for the path prefix.", "26. name: FB_STATE_NO_PROCESSING, type: DInt, initial: 0, role: Constant for no processing state.", "27. name: FB_STATE_INIT, type: DInt, initial: 1, role: Constant for initialization state.", "28. name: FB_STATE_FILE_READ, type: DInt, initial: 2, role: Constant for file read state.", "29. name: FB_STATE_PARAMETER_TO_INTERFACE, type: DInt, initial: 3, role: Constant for parameter to interface state.", "30. name: STATUS_EXECUTION_FINISHED, type: Word, initial: 16#0000, role: Constant for execution finished status.", "31. name: STATUS_NO_CALL, type: Word, initial: 16#7000, role: Constant for no call status.", "32. name: STATUS_FIRST_CALL, type: Word, initial: 16#7001, role: Constant for first call status.", "33. name: STATUS_SUBSEQUENT_CALL, type: Word, initial: 16#7002, role: Constant for subsequent call status.", "34. name: ERR_UNDEFINED_STATE, type: Word, initial: 16#8600, role: Constant for undefined state error.", "35. name: ERR_BUFFER_LOWERBOUND, type: Word, initial: 16#8201, role: Constant for buffer lowerbound error.", "36. name: ERR_BUFFER_ARRAY_TO_SMALL_TO_COPY, type: Word, initial: 16#8202, role: Constant for buffer array too small error.", "37. name: ERR_FILE_PATH, type: Word, initial: 16#8401, role: Constant for file path error.", "38. name: ERR_FILE_SIZE_GRATER_THEN_DATA_SIZE, type: Word, initial: 16#8411, role: Constant for file size greater than data size error.", "39. name: ERR_FILE_SIZE_LESS_THEN_DATA_SIZE, type: Word, initial: 16#8412, role: Constant for file size less than data size error.", "40. name: ERR_MOVE_BLK_VARIANT, type: Word, initial: 16#8601, role: Constant for move block variant error.", "41. name: ERR_DATA_SERIALIZE, type: Word, initial: 16#8602, role: Constant for data serialize error.", "42. name: ERR_DATA_DESERIALIZE, type: Word, initial: 16#8603, role: Constant for data deserialize error.", "43. name: ERR_FILE_READ_INIT, type: Word, initial: 16#8604, role: Constant for file read init error.", "44. name: ERR_FILE_READ, type: Word, initial: 16#8605, role: Constant for file read error."], "instructions": ["FileReadC"], "planning": "# Step1. Initialize the FB state machine and internal variables.\n# Step2. Verify the file path and check if the buffer lower bound is 0.\n# Step3. Verify the parameter data types and check if the buffer is big enough to store the data.\n# Step4. Initialize the file read instruction with the specified parameters.\n# Step5. In the file read state, set the file handler request to true and check for errors or completion.\n# Step6. Check the file length parameter and verify if the data length matches.\n# Step7. In the parameter to interface state, copy the buffer array into the parameter array or deserialize the data from the buffer.\n# Step8. Write the outputs based on the diagnostics status and update the internal and output variables accordingly.\n# Step9. Reset the outputs if the execute input is false and the FB is done or has an error.", "name": "LGF_FileRead"}