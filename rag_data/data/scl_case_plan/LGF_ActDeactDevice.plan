{"variables": ["1. name: enable, type: Bool, initial: None, role: Input to enable the functionality of the FB.", "2. name: activate, type: Bool, initial: None, role: Input for activating the device.", "3. name: deactivate, type: Bool, initial: None, role: Input for deactivating the device.", "4. name: hwId, type: HW_DEVICE, initial: None, role: Hardware ID of the device to be activated/deactivated.", "5. name: parameter, type: LGF_typeActDeactDeviceParameter, initial: None, role: Parameters for the activation/deactivation process.", "6. name: valid, type: Bool, initial: None, role: Output indicating if valid output values are available.", "7. name: busy, type: Bool, initial: None, role: Output indicating if the FB is busy.", "8. name: error, type: Bool, initial: None, role: Output indicating if an error occurred.", "9. name: status, type: Word, initial: #STATUS_NO_CALL, role: Output for status and error identification.", "10. name: activating, type: Bool, initial: None, role: Output indicating if the activation process is active.", "11. name: isActivated, type: Bool, initial: None, role: Output indicating if the device is activated.", "12. name: deactivating, type: Bool, initial: None, role: Output indicating if the deactivation process is active.", "13. name: isDeactivated, type: Bool, initial: None, role: Output indicating if the device is deactivated.", "14. name: deviceStateOK, type: Bool, initial: None, role: Output indicating if the device is activated and connected to the IO-System.", "15. name: diagnostics, type: LGF_typeDiagnostics, initial: None, role: Output for storing and transferring diagnostic information.", "16. name: statInternal, type: Struct, initial: None, role: Internal state structure for the FB.", "17. name: statActDeact, type: Struct, initial: None, role: Internal state structure for activation/deactivation.", "18. name: statDeviceState, type: Struct, initial: None, role: Internal state structure for device state.", "19. name: instWatchdog, type: IEC_TIMER, initial: None, role: Internal watchdog timer.", "20. name: instWatchdogReintegration, type: IEC_TIMER, initial: None, role: Internal watchdog timer for reintegration.", "21. name: statMainState, type: DInt, initial: #FB_STATE_NO_PROCESSING, role: Main state of the FB.", "22. name: tempEnable, type: Bool, initial: None, role: Temporary variable for the 'enable' input.", "23. name: tempExitStateLoop, type: Bool, initial: None, role: Temporary variable for exiting the state loop.", "24. name: MODE_INFORMATION, type: USInt, initial: 0, role: Constant for mode information.", "25. name: MODE_ACTIVATE, type: USInt, initial: 1, role: Constant for activation mode.", "26. name: MODE_DEACTIVATE, type: USInt, initial: 2, role: Constant for deactivation mode.", "27. name: DEVICE_IS_ACTIVE, type: Word, initial: 16#0001, role: Constant for device active state.", "28. name: DEVICE_IS_PASSIVE, type: Word, initial: 16#0002, role: Constant for device passive state.", "29. name: DEVICE_ACTIVATION_TIMEOUT, type: Word, initial: 16#80A7, role: Constant for device activation timeout.", "30. name: RESULT_SUCCESS, type: Word, initial: 16#0000, role: Constant for successful result.", "31. name: SLAVE_EXISTS, type: UInt, initial: 4, role: Constant for slave exists.", "32. name: SLAVE_FAULTY, type: UInt, initial: 2, role: Constant for slave faulty.", "33. name: SLAVE_DISBALED, type: UInt, initial: 3, role: Constant for slave disabled.", "34. name: FB_STATE_NO_PROCESSING, type: DInt, initial: 0, role: Constant for no processing state.", "35. name: FB_STATE_ENABLING_START, type: DInt, initial: 10, role: Constant for enabling start state.", "36. name: FB_STATE_ENABLING_WAIT, type: DInt, initial: 11, role: Constant for enabling wait state.", "37. name: FB_STATE_DEACTIVATE_START, type: DInt, initial: 40, role: Constant for deactivation start state.", "38. name: FB_STATE_DEACTIVATE_WAIT, type: DInt, initial: 41, role: Constant for deactivation wait state.", "39. name: FB_STATE_DEACTIVATED, type: DInt, initial: 50, role: Constant for deactivated state.", "40. name: FB_STATE_ACTIVATE_START, type: DInt, initial: 60, role: Constant for activation start state.", "41. name: FB_STATE_ACTIVATE_WAIT, type: DInt, initial: 61, role: Constant for activation wait state.", "42. name: FB_STATE_ACTIVATED, type: DInt, initial: 70, role: Constant for activated state.", "43. name: FB_STATE_DISABLING_START, type: DInt, initial: 90, role: Constant for disabling start state.", "44. name: FB_STATE_DISABLING_WAIT, type: DInt, initial: 91, role: Constant for disabling wait state.", "45. name: STATUS_NO_CALL, type: Word, initial: 16#7000, role: Constant for no call status.", "46. name: STATUS_FIRST_CALL, type: Word, initial: 16#7001, role: Constant for first call status.", "47. name: STATUS_SUBSEQUENT_CALL, type: Word, initial: 16#7002, role: Constant for subsequent call status.", "48. name: SUB_STATUS_NO_ERROR, type: Word, initial: 16#0000, role: Constant for no error sub-status.", "49. name: ERR_UNDEFINED_STATE, type: Word, initial: 16#8600, role: Constant for undefined state error.", "50. name: ERR_LOG2GEO, type: Word, initial: 16#8601, role: Constant for LOG2GEO error.", "51. name: ERR_GEO2LOG, type: Word, initial: 16#8601, role: Constant for GEO2LOG error.", "52. name: ERR_DEVICE_DEACTIVATING, type: Word, initial: 16#8640, role: Constant for device deactivating error.", "53. name: ERR_DEVICE_DEACTIVATING_TIME_OUT, type: Word, initial: 16#8641, role: Constant for device deactivating timeout error.", "54. name: ERR_READ_ACTIVATION_STATE_WHILE_DEACTIVATED, type: Word, initial: 16#8650, role: Constant for read activation state while deactivated error.", "55. name: ERR_DEVICE_ACTIVATING, type: Word, initial: 16#8660, role: Constant for device activating error.", "56. name: ERR_DEVICE_ACTIVATING_TIME_OUT, type: Word, initial: 16#8661, role: Constant for device activating timeout error.", "57. name: ERR_READ_DEVICES_STATES_DURING_ACTIVATION, type: Word, initial: 16#8662, role: Constant for read device states during activation error.", "58. name: ERR_READ_DEVICES_STATES_WHILE_ACTIVE, type: Word, initial: 16#8670, role: Constant for read device states while active error.", "59. name: ERR_DEVICE_STATE_WHILE_ACTIVE, type: Word, initial: 16#8671, role: Constant for device state while active error.", "60. name: ERR_READ_ACTIVATION_STATE_WHILE_ACTIVE, type: Word, initial: 16#8672, role: Constant for read activation state while active error.", "61. name: ERR_DISABLING_DEACT_DEVICE, type: Word, initial: 16#8690, role: Constant for disabling deact device error.", "62. name: ERR_DISABLING_WATCHDOG, type: Word, initial: 16#8691, role: Constant for disabling watchdog error."], "instructions": ["D_ACT_DP", "IEC_TIMER", "LOG2GEO", "GEO2LOG", "DeviceStates", "INT_TO_WORD"], "planning": "Step1. Check if the 'enable' input is TRUE and the internal status is 'STATUS_NO_CALL'. If so, initialize the FB and set the main state to 'FB_STATE_ENABLING_START'.\nStep2. If the 'enable' input is FALSE and the previous 'enable' state was TRUE, set the main state to 'FB_STATE_DISABLING_START' to disable the FB.\nStep3. If the internal status is 'STATUS_FIRST_CALL', set it to 'STATUS_SUBSEQUENT_CALL'.\nStep4. If the main state is 'FB_STATE_NO_PROCESSING', return from the FB.\nStep5. Detect rising edges for 'activate' and 'deactivate' inputs and update the main state accordingly.\nStep6. Enter a state loop and process the state machine based on the current main state.\nStep7. In each state, execute the corresponding actions, including calling system functions and timers, and update the diagnostics and outputs.\nStep8. After processing the state machine, write the static values to the outputs and update the diagnostics.\nStep9. If the 'disablingCompleted' flag is TRUE, reset the outputs and set the main state to 'FB_STATE_NO_PROCESSING'.\nStep10. If an error is cleared by the user, set the error output to TRUE and update the diagnostics.\nStep11. If an error is automatically cleared by the FB, set the busy output to TRUE and update the diagnostics.\nStep12. If the error is neither user nor automatically cleared, set the valid and busy outputs to TRUE and update the status.\nStep13. Write the application-specific static values to the outputs and set the ENO output based on the error state.\nStep14. Repeat the state loop until the 'tempExitStateLoop' flag is TRUE.", "name": "LGF_ActDeactDevice"}