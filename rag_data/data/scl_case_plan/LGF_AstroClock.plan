{"variables": ["1. name: enable, type: Bool, initial: None, role: A control signal to enable or disable the functionality of the function block.", "2. name: positionGps, type: LGF_typeGPS_DD, initial: None, role: GPS position in decimal degrees used for calculating sunrise and sunset times.", "3. name: offsetSunrise, type: Time, initial: None, role: Time offset added to the calculated sunrise time.", "4. name: offsetSunset, type: Time, initial: None, role: Time offset added to the calculated sunset time.", "5. name: valid, type: Bool, initial: None, role: Indicates if the function block has valid output values.", "6. name: busy, type: Bool, initial: None, role: Indicates if the function block is currently processing data.", "7. name: error, type: Bool, initial: None, role: Indicates if an error occurred during the execution of the function block.", "8. name: status, type: Word, initial: #STATUS_NO_CALL, role: Provides status information or error codes for the function block.", "9. name: subFunctionStatus, type: Word, initial: None, role: Provides status or return values of called function blocks, functions, or system blocks.", "10. name: actualLocalTime, type: DTL, initial: None, role: Stores the current local time.", "11. name: sunriseTime, type: DTL, initial: None, role: Stores the calculated sunrise time.", "12. name: sunsetTime, type: DTL, initial: None, role: Stores the calculated sunset time.", "13. name: isDaytime, type: Bool, initial: None, role: Indicates if the current local time is between sunrise and sunset.", "14. name: statEnableOld, type: Bool, initial: None, role: Stores the previous value of the 'enable' input for edge detection.", "15. name: statBusy, type: Bool, initial: None, role: Internal variable to track the busy status of the function block.", "16. name: statStatus, type: Word, initial: #STATUS_NO_CALL, role: Internal variable to store the current status or error code of the function block.", "17. name: statSubfunctionStatus, type: Word, initial: None, role: Internal variable to store the status or return value of called function blocks, functions, or system blocks.", "18. name: statLongitudeHour, type: Real, initial: None, role: Stores the longitude in hours for calculation purposes.", "19. name: statLatitudeRadiant, type: Real, initial: None, role: Stores the latitude in radians for calculation purposes.", "20. name: tempRetval, type: Word, initial: None, role: Temporary variable to store return values of system functions.", "21. name: tempSysTime, type: DTL, initial: None, role: Temporary variable to store the system time in UTC.", "22. name: tempOfficLocTime, type: DTL, initial: None, role: Temporary variable to store the official local time.", "23. name: tempDate1Jan, type: DTL, initial: None, role: Temporary variable to store the date of January 1st for day of the year calculations.", "24. name: tempSunrise, type: DTL, initial: None, role: Temporary variable to store the calculated sunrise time.", "25. name: tempSunset, type: DTL, initial: None, role: Temporary variable to store the calculated sunset time.", "26. name: tempTimeZone, type: Real, initial: None, role: Stores the time zone difference between UTC and local time.", "27. name: tempDayOfYear, type: Real, initial: None, role: Stores the day of the year for astronomical calculations.", "28. name: tempAproximateTime, type: Real, initial: None, role: Stores an approximate time value used in sunrise and sunset calculations.", "29. name: tempSunMeanAnomaly, type: Real, initial: None, role: Stores the mean anomaly of the sun for astronomical calculations.", "30. name: tempSunLongitude, type: Real, initial: None, role: Stores the true longitude of the sun for astronomical calculations.", "31. name: tempSunMeanRad, type: Real, initial: None, role: Stores the mean anomaly of the sun in radians for astronomical calculations.", "32. name: tempSunLongitudeRadiant, type: Real, initial: None, role: Stores the true longitude of the sun in radians for astronomical calculations.", "33. name: tempSunAscension, type: Real, initial: None, role: Stores the right ascension of the sun for astronomical calculations.", "34. name: tempSunAscensRad, type: Real, initial: None, role: Stores the right ascension of the sun in radians for astronomical calculations.", "35. name: tempSinDeclination, type: Real, initial: None, role: Stores the sine of the declination of the sun for astronomical calculations.", "36. name: tempCosDeclination, type: Real, initial: None, role: Stores the cosine of the declination of the sun for astronomical calculations.", "37. name: tempCosLocHourAngle, type: Real, initial: None, role: Stores the cosine of the local hour angle of the sun for astronomical calculations.", "38. name: tempLocalHourAngle, type: Real, initial: None, role: Stores the local hour angle of the sun for astronomical calculations.", "39. name: tempLocalMeanTime, type: Real, initial: None, role: Stores the local mean time of sunrise or sunset for astronomical calculations.", "40. name: tempUTC, type: Real, initial: None, role: Stores the UTC time of sunrise or sunset for astronomical calculations.", "41. name: tempLocalTime, type: Real, initial: None, role: Stores the local time of sunrise or sunset for astronomical calculations.", "42. name: SUBSTATUS_DAYLIGHT_SAVING_TIME, type: Word, initial: 16#0001, role: Constant representing the daylight saving time status.", "43. name: NO_ERROR, type: Word, initial: 16#0000, role: Constant representing the absence of an error.", "44. name: STATUS_EXECUTION_FINISHED_NO_ERROR, type: Word, initial: 16#0000, role: Constant representing the successful execution of the function block.", "45. name: STATUS_NO_CALL, type: Word, initial: 16#7000, role: Constant representing the status when the function block has not been called.", "46. name: STATUS_IN_OPERATION, type: Word, initial: 16#7001, role: Constant representing the status when the function block is in operation.", "47. name: ERR_LATITUDE_VALUE, type: Word, initial: 16#8204, role: Constant representing an error code for an invalid latitude value.", "48. name: ERR_LONGITUDE_VALUE, type: Word, initial: 16#8205, role: Constant representing an error code for an invalid longitude value.", "49. name: ERR_RD_SYS_T, type: Word, initial: 16#8601, role: Constant representing an error code for an error reading system time.", "50. name: ERR_RD_LOC_T, type: Word, initial: 16#8602, role: Constant representing an error code for an error reading local time.", "51. name: DEGREE_0, type: Real, initial: 0.0, role: Constant representing 0 degrees.", "52. name: DEGREE_15, type: Real, initial: 15.0, role: Constant representing 15 degrees.", "53. name: DEGREE_90, type: Real, initial: 90.0, role: Constant representing 90 degrees.", "54. name: DEGREE_180, type: Real, initial: 180.0, role: Constant representing 180 degrees.", "55. name: DEGREE_360, type: Real, initial: 360.0, role: Constant representing 360 degrees.", "56. name: PI, type: Real, initial: 3.141593, role: Constant representing the value of pi.", "57. name: DEGREE_TO_RADIANT, type: Real, initial: 0.01745329, role: Constant representing the conversion factor from degrees to radians.", "58. name: RADIANT_TO_DEGREE, type: Real, initial: 57.29578, role: Constant representing the conversion factor from radians to degrees.", "59. name: SUN_ZENIT, type: LReal, initial: 1.58534073722818, role: Constant representing the sun's zenith angle.", "60. name: MAX_MIN_OR_SEC_59, type: UInt, initial: 59, role: Constant representing the maximum value for minutes or seconds.", "61. name: SECONDS_PER_HOUR, type: Real, initial: 3600.0, role: Constant representing the number of seconds in an hour.", "62. name: MINUTES_PER_HOUR, type: Real, initial: 60.0, role: Constant representing the number of minutes in an hour.", "63. name: HOURS_PER_DAY, type: Real, initial: 24.0, role: Constant representing the number of hours in a day.", "64. name: MS_PER_HOUR, type: Real, initial: 3600000.0, role: Constant representing the number of milliseconds in an hour.", "65. name: TIME_ZERO, type: DTL, initial: None, role: Constant representing the zero value for a DTL data type.", "66. name: FIRST_MONTH_AND_DAY, type: USInt, initial: 1, role: Constant representing the value of the first month and day.", "67. name: APPROXIMATE_TIME_6, type: Int, initial: 6, role: Constant representing an approximate time value of 6.", "68. name: APPROXIMATE_TIME_18, type: Int, initial: 18, role: Constant representing an approximate time value of 18.", "69. name: SUN_MEAN_ANOMALY_0_9856, type: Real, initial: 0.9856, role: Constant representing a value used in the calculation of the sun's mean anomaly.", "70. name: SUN_MEAN_ANOMALY_3_289, type: Real, initial: 3.289, role: Constant representing a value used in the calculation of the sun's mean anomaly.", "71. name: SUN_TRUE_LONGITUDE_0_02, type: Real, initial: 0.02, role: Constant representing a value used in the calculation of the sun's true longitude.", "72. name: SUN_TRUE_LONGITUDE_1_916, type: Real, initial: 1.916, role: Constant representing a value used in the calculation of the sun's true longitude.", "73. name: SUN_TRUE_LONGITUDE_2_0, type: Real, initial: 2.0, role: Constant representing a value used in the calculation of the sun's true longitude.", "74. name: SUN_TRUE_LONGITUDE_282_634, type: Real, initial: 282.634, role: Constant representing a value used in the calculation of the sun's true longitude.", "75. name: SUN_RIGHT_ASCENSION_0_91764, type: Real, initial: 0.91764, role: Constant representing a value used in the calculation of the sun's right ascension.", "76. name: SUN_RIGHT_ASCENSION_2_0, type: Real, initial: 2.0, role: Constant representing a value used in the calculation of the sun's right ascension.", "77. name: SUN_RIGHT_ASCENSION_2_PI, type: Real, initial: 6.283185, role: Constant representing a value used in the calculation of the sun's right ascension.", "78. name: SUN_DECLINATION_0_39782, type: Real, initial: 0.39782, role: Constant representing a value used in the calculation of the sun's declination.", "79. name: SUM_LOCAL_HOUR_ANGLE, type: Real, initial: 1.0, role: Constant representing a value used in the calculation of the sun's local hour angle.", "80. name: LOCAL_MEAN_TIME_0_06571, type: Real, initial: 0.06571, role: Constant representing a value used in the calculation of the local mean time.", "81. name: LOCAL_MEAN_TIME_6_622, type: Real, initial: 6.622, role: Constant representing a value used in the calculation of the local mean time."], "instructions": ["INT_TO_WORD", "RD_SYS_T", "RD_LOC_T", "TIME_TO_DINT", "T_DIFF", "UDINT_TO_REAL", "DATE_TO_UDINT", "DTL_TO_DATE", "ABS", "SIN", "TAN", "ATAN", "COS", "ASIN", "LREAL_TO_REAL", "REAL_TO_LREAL", "ACOS", "FLOOR", "UDINT_TO_TIME", "REAL_TO_UDINT", "TRUNC"], "planning": "Step 1. Initialize the internal status variables to indicate no error and no operation.\nStep 2. Check the rising edge of the 'enable' input and initialize the function block if it's enabled.\nStep 3. Check the falling edge of the 'enable' input and reset the function block if it's disabled.\nStep 4. If the function block is enabled and was previously enabled, proceed with the astro clock calculation.\nStep 5. Reset internal status storage for error and busy flags.\nStep 6. Read the system time in UTC and check for errors.\nStep 7. Read the official local time and check for errors or daylight saving time adjustments.\nStep 8. Calculate the time zone difference between UTC and local time.\nStep 9. Calculate the day of the year based on the official local time.\nStep 10. Check for invalid input values for latitude and longitude and set error flags if necessary.\nStep 11. Convert the GPS position to radians for calculation purposes.\nStep 12. Calculate the approximate time for sunrise and sunset based on the day of the year and longitude.\nStep 13. Calculate the sun's mean anomaly and convert it to radians.\nStep 14. Calculate the sun's true longitude and keep it within the range of 0 to 360 degrees.\nStep 15. Calculate the sun's right ascension and keep it within the range of 0 to 360 degrees.\nStep 16. Calculate the sun's declination based on its true longitude.\nStep 17. Calculate the sun's local hour angle for sunrise and keep it within a valid range.\nStep 18. Calculate the local mean time of sunrise.\nStep 19. Adjust the local mean time to UTC and then to local time, considering the time zone.\nStep 20. Convert the local time to a DTL data type and add the offset to get the final sunrise time.\nStep 21. Repeat steps 12 to 20 for the calculation of the sunset time.\nStep 22. Determine if the current local time is between sunrise and sunset to set the 'isDaytime' flag.\nStep 23. Store the calculated sunrise and sunset times, local time, and other status information in the output variables.\nStep 24. Update the previous 'enable' input value for edge detection.\nStep 25. If the function block is busy, set the 'valid' flag based on the absence of error and the busy status.\nStep 26. Set the 'busy' flag based on the internal busy status.\nStep 27. Set the 'error' flag based on the presence of an error code.\nStep 28. Set the 'status' and 'subFunctionStatus' flags based on the internal status and subfunction status.\nStep 29. Force the ENO output to TRUE as error handling is done through error and status flags.", "name": "LGF_AstroClock"}