{"variables": [], "instructions": [], "planning": "\n- 概述\n这段代码是一个使用SCL编写的功能块，名为“LGF_TriangleCI”，用于生成三角波形信号。它使用调用周期性中断OB的时间间隔来生成信号。\n- 变量定义\n代码中定义了以下几类变量：\n  - 输入变量：振幅、偏移、周期、相移、调用OB、重置\n  - 输出变量：值、错误、状态、子函数状态\n  - 内部变量：统计计数器\n  - 临时变量：临时周期时间、临时周期相位、临时周期状态、临时读取时间状态、临时值、临时相移\n  - 常量：秒到毫秒、零、斜率、负直线Y偏移、子状态无错误、状态完成无错误、查询CINT OB不可用、错误OB不可用、错误查询CINT\n- 主逻辑部分\n-- REGION Block info header\n  此区域包含功能块的元信息，简单描述。\n-- REGION DESCRIPTION\n  此区域目前为空，但可以包含功能块的简单描述。\n-- REGION Get sample time\n  此区域获取采样时间，根据调用周期性中断OB的编号。首先，使用QRY_CINT函数获取周期和相位。然后，检查是否有错误发生。如果有，则设置错误标志，并返回。否则，检查OB是否不可用。如果是，则设置错误标志，并返回。\n-- REGION Caluclations and outputs assigment\n  此区域执行计算并将输出赋值。首先，检查是否需要重置。如果是，则将统计计数器和临时值重置为0。否则，首先将统计计数器增加与周期时间相关的值，并使用取模运算来计算当前周期内的位置。然后，计算考虑相移的真正相移。接下来，使用公式计算三角波形的值，并加上偏移量。最后，将计算出的值写入输出，并设置错误和状态标志。\n\n\n", "name": "LGF_TriangleCI"}