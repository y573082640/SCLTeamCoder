{"variables": [], "instructions": [], "planning": "\n- 概述\n这段代码是一个名为“LGF_Histogram_UDInt”的SCL功能块，用于计算一组UDInt测量值，以便在WinCC中创建直方图。它执行排序、频率计算和直方图数据的生成。\n\n- 变量定义\n代码中定义了以下几类变量：\n - 输入变量：执行、类数\n - 输出变量：错误、状态、子功能状态、直方图值、轴、类宽\n - 输入/输出变量：值（动态数组）\n - 内部变量：状态数组、状态状态、状态子功能状态、状态执行旧、Shell排序实例、状态最小、状态最大、状态计数器、状态宽度、状态频率值、状态索引、状态索引旧、状态边界、状态最大频率、状态直方图频率绝对、状态直方图频率相对、状态直方图类中值\n - 临时变量：临时元素数、临时下限、临时上限、临时值UDInt、临时最小UDInt、临时最大UDInt、临时循环索引、临时数组偏移\n - 常量：零整型、零LReal、一维、数组起始索引、元素计数校正、增量、计数器校正、最小类数、最大类数、类计数器下限、类计数器上限、比率、百分比校正、最大数组元素、子状态无错误、状态执行完成、状态无调用、状态第一次调用、错误Shell排序、错误类数错误\n\n- \n- 主逻辑部分\n  -- REGION Block info header\n     此区域包含功能块的元信息，简单描述。\n  -- REGION DESCRIPTION\n     此区域目前为空，但可以包含功能块的简单描述。\n  -- REGION Detect execution bit\n     此区域检测执行位的上升沿。如果执行为真且上一个周期为假，则获取数组的边界，重置并初始化一些变量，并将状态设置为“第一次调用”。如果执行为假，则将状态设置为“无调用”。\n  -- REGION Validation\n     此区域检查类数是否在有效范围内。如果类数超出最大或最小限制，则将状态设置为“错误类数错误”。\n  -- REGION Histogram calculation\n     此区域执行直方图的计算。首先，计算数组中的元素数量。然后，将数组索引移到0..n的范围。接下来，使用Shell排序算法对数组进行排序。如果排序过程中出现错误，则将状态设置为“错误Shell排序”。否则，识别最大和最小值，并计算类宽。然后，填充一个临时数组，并搜索所有值。对于每个类，计算频率值，并将它们存储在状态直方图频率绝对和状态直方图频率相对数组中。最后，找到每个类的中值，并将值复制到输出数组中。状态设置为“状态执行完成”。\n  -- REGION Write outputs\n     此区域将轴值、类宽、错误、状态和子功能状态写入输出。轴值包括最小值、最大值、零和最大频率。ENO机制未使用，强制为真。\n\n\n", "name": "LGF_Histogram_UDInt"}