{"variables": [], "instructions": [], "planning": "\n- 概述\n这段代码是一个名为“LGF_LimRateOfChangeAdvancedCI”的功能块，它实现了从一个阶跃函数生成斜坡函数的功能。功能块可以限制正负方向的速率变化，并提供高限和低限的监控。\n\n- 变量定义\n代码中定义了以下几类变量：\n - 输入变量：自动值、手动值、设置正上限速率、设置正下限速率、设置负上限速率、设置负下限速率、设置高限、设置低限、默认输出值、使能默认输出值、跟踪、手动操作、重置、调用OB\n - 输出变量：输出值、正上限速率、正下限速率、负上限速率、负下限速率、高限、低限、错误、状态、子功能状态\n - 内部变量：上一个输出值、手动操作状态\n - 临时变量：临时正上限、临时正下限、临时负上限、临时负下限、临时高限、临时低限、临时周期实数、临时输出值、临时变量、临时周期时间、临时周期相位、临时周期状态、临时读取时间状态\n - 常量：零整型、零实型、秒到微秒、子状态无错误、状态完成无错误、错误负速率限制、错误负速率变化、错误查询CINT、错误OB不可用\n\n- \n- 主逻辑部分\n  -- REGION Block info header\n     此区域包含功能块的元信息，如标题、功能、库、作者、测试环境、工程、限制和要求。\n  -- REGION DESCRIPTION\n     此区域目前为空，但可以包含功能块的简单描述。\n  -- REGION Initialization\n     此区域初始化功能块。首先，将所有临时速率限制和极限标志设置为假。然后，根据是否使能默认输出值，将临时输出值设置为自动值或默认输出值。接着，使用QRY_CINT函数获取采样时间，并根据周期时间计算实际周期时间（以秒为单位）。\n  -- REGION Validation\n     此区域验证输入参数。首先，检查QRY_CINT函数是否返回错误。如果是，则设置错误标志，并返回错误状态。然后，检查OB是否可用。如果不可用，则设置错误标志，并返回错误状态。最后，检查高限和低限是否设置正确，以及速率限制是否为正值。如果有任何错误，则设置错误标志，并返回错误状态。\n  -- REGION Function processing\n     此区域处理功能块的逻辑。首先，检查是否需要重启。如果是，则重置手动操作标志，并根据是否使能默认输出值，将输出值设置为默认值或零。然后，根据手动操作标志，进入手动模式或自动模式。\n     - 手动模式\n       在手动模式下，输出值被设置为手动值，并保持手动操作状态。\n     - 自动模式\n       在自动模式下，首先检查是否使能默认输出值。如果是，则将输出值设置为默认值。否则，检查是否跟踪。如果是，则输出值等于输入值。否则，根据上一个输出值的正负，进入不同的处理逻辑。\n       - 负值范围\n         如果上一个输出值小于零，则根据自动值与上一个输出值的关系，处理负上限或负下限速率限制。如果自动值小于零，则根据是否设置了负下限速率限制，处理速率限制或零交叉。\n       - 正值范围 + 0\n         如果上一个输出值大于或等于零，则根据自动值与上一个输出值的关系，处理正上限或正下限速率限制。如果自动值大于或等于零，则根据是否设置了正下限速率限制，处理速率限制或零交叉。\n     最后，根据临时输出值是否超过高限或低限，设置相应的极限标志，并根据是否处于手动模式，调整输出值和速率限制标志。\n  -- REGION writting to outputs\n     此区域将计算后的输出值和状态信息写入输出变量。首先，将错误标志和状态设置为无错误。然后，将输出值、速率限制标志和极限标志设置为相应的临时变量值。最后，由于ENO机制未使用，将ENO设置为真。\n\n\n", "name": "LGF_LimRateOfChangeAdvancedCI"}