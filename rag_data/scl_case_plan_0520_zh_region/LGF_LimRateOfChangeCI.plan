{"variables": [], "instructions": [], "planning": "\n- 概述\n这段代码是一个名为“LGF_LimRateOfChangeCI”的功能块，用于生成一个斜坡函数，将阶跃函数转换为斜坡输出。它限制了一个信号的速率变化，并确保输出值以设定的速率变化。\n\n- 变量定义\n代码中定义了以下几类变量：\n - 输入变量：值、设定变化率、默认输出值、启用默认输出值、调用OB\n - 输出变量：延迟值、错误、状态、子功能状态\n - 内部变量：上一个输出值\n - 临时变量：临时循环时间、临时循环阶段、临时循环状态、临时循环时间实数、临时读取时间状态、临时输出\n - 常量：零整型、零实数、每秒微秒、子状态无错误、状态完成无错误、错误负速率限制、错误查询CINT、错误OB不可用\n\n- \n- 主逻辑部分\n-- REGION Block info header\n   此区域包含功能块的元信息，简单描述。\n-- REGION DESCRIPTION\n   此区域目前为空，但可以包含功能块的简单描述。\n-- REGION Read cycle time of the call OB\n   此区域读取调用OB的循环时间。它使用QRY_CINT函数来查询OB的循环时间和相位，并将结果存储在临时变量中。然后，将循环时间转换为实数，以便在后续计算中使用。\n-- REGION Validation\n   此区域验证输入参数。首先，检查QRY_CINT函数是否返回错误。如果是，则设置错误标志，并返回错误状态。然后，检查OB是否不可用。如果是，则设置错误标志，并返回错误状态。最后，检查设定变化率是否为负值。如果是，则设置错误标志，并返回错误状态。\n-- REGION Calculation of rate of change\n   此区域计算速率变化。首先，检查是否启用默认输出值。如果是，则将默认输出值赋给上一个输出值和延迟值，并返回成功状态。否则，使用临时变量存储上一个输出值。然后，根据当前值和上一个输出值，使用设定的变化率计算新的输出值。如果当前值小于上一个输出值，则减少输出值。如果当前值大于上一个输出值，则增加输出值。最后，将计算出的输出值赋给上一个输出值。\n-- REGION Writting to outputs\n   此区域将计算出的输出值写入输出变量。首先，将临时输出值赋给延迟值。然后，设置成功状态，并清除错误标志。最后，启用ENO机制。\n\n\n", "name": "LGF_LimRateOfChangeCI"}