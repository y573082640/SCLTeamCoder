{"variables": [], "instructions": [], "planning": "\n- 概述\n这段代码是一个名为“LGF_Histogram_LReal”的SCL功能块，它计算一个测量列表的所有LReal值，用于在WinCC中创建直方图。\n\n- 变量定义\n代码中定义了以下几类变量：\n - 输入变量：执行、类别数\n - 输出变量：错误、状态、子功能状态、直方图值、轴、类别宽度\n - 输入/输出变量：值\n - 内部变量：状态数组、状态状态、状态子功能状态、状态执行旧、实例希尔排序、状态最小、状态最大、状态计数器、状态宽度、状态频率值、状态索引、状态索引旧、状态边界、状态最大频率、状态直方图频率绝对、状态直方图频率相对、状态直方图类别中值\n - 临时变量：临时元素数、临时下界、临时上界、临时值LReal、临时最小LReal、临时最大LReal、临时循环索引、临时数组偏移\n - 常量：零整数、零LReal、一维、数组起始索引、元素计数校正、增量、计数器校正、最小类别数、最大类别数、类别计数器下限、类别计数器上限、比率、百分比校正、最大数组元素、子状态无错误、状态执行完成、状态无调用、状态第一次调用、错误希尔排序、错误错误类别数\n\n- \n- 主逻辑部分\n  -- REGION Detect execution bit\n     此区域检测执行位的正边缘。如果执行为真且上一个周期为假，则获取数组的边界，重置并初始化标签，并将状态设置为“第一次调用”。如果执行为假，则将状态设置为“无调用”。\n     \n     具体步骤如下：\n     1. 使用LOWER_BOUND和UPPER_BOUND函数获取数组的下界和上界。\n     2. 重置并初始化直方图频率绝对、直方图频率相对和直方图类别中值数组。\n     3. 初始化状态、子功能状态、频率值、最大频率、索引和索引旧。\n     4. 如果执行为假，则将状态设置为“无调用”。\n     \n  -- REGION Validation\n     此区域检查类别数是否在允许的范围内。如果不在，则将状态设置为“错误错误类别数”。\n     \n     具体步骤如下：\n     1. 检查类别数是否大于最大类别数或小于最小类别数。\n     2. 如果是，则将状态设置为“错误错误类别数”。\n     \n  -- REGION Histogram calculation\n     此区域计算直方图。首先，计算数组元素的数量。然后，将数组索引移到范围0..n。接下来，对数组进行排序。如果排序出错，则将状态设置为“错误希尔排序”。否则，识别最大和最小值，计算类别宽度，并将边界设置为最小值加上宽度。然后，填充临时数组，并搜索所有值。对于每个类别，计算频率值，并将它们存储在状态直方图频率绝对和状态直方图频率相对数组中。最后，找到每个类别的中值，并将值复制到输出数组。\n     \n     具体步骤如下：\n     1. 计算数组元素的数量，考虑到数组的实际元素比计算出的范围多一个。\n     2. 将数组索引移到范围0..n，以便从0开始访问数组。\n     3. 使用希尔排序算法对数组进行排序。\n     4. 检查排序是否出错。如果是，则将状态设置为“错误希尔排序”。\n     5. 识别最大和最小值，并计算类别宽度。\n     6. 填充临时数组，将值从输入数组复制到状态数组。\n     7. 对于每个类别，计算频率值，并将它们存储在状态直方图频率绝对和状态直方图频率相对数组中。\n     8. 找到每个类别的中值，并将值复制到输出数组。\n     9. 将状态设置为“状态执行完成”。\n     \n  -- REGION Write outputs\n     此区域将轴值、类别宽度和错误、状态、子功能状态分配给输出。ENO机制未使用，强制为真。\n     \n     具体步骤如下：\n     1. 将最小值、最大值、零和最大频率分配给轴数组。\n     2. 将类别宽度分配给输出。\n     3. 将状态状态和子功能状态分配给输出。\n     4. 将ENO设置为真，因为不使用ENO机制。\n\n\n", "name": "LGF_Histogram_LReal"}